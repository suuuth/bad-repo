{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { isProxy, toRaw } from 'vue';\nimport router from '@/router';\nconsole.log(axios.defaults.baseURL);\nconst api = `${axios.defaults.baseURL}api`;\nconst state = {\n  user: null,\n  access_token: null\n};\nconst getters = {\n  isAuthenticated: state => {\n    console.error('isAuthenticated state: ', isProxy(state) ? toRaw(state) : state);\n    return !!state.user;\n  },\n  StateUser: state => state.user\n};\nconst actions = {\n  async Register({\n    dispatch\n  }, form) {\n    await axios.post(`${api}/register`, form);\n    let UserForm = new FormData();\n    UserForm.append('username', form.username);\n    UserForm.append('password', form.password);\n    await dispatch('LogIn', UserForm);\n  },\n  async LogIn({\n    commit\n  }, user) {\n    user = isProxy(user) ? toRaw(user) : user;\n    axios.post(`${api}/login`, user).then(response => {\n      console.log(response.data.user);\n      commit('setUser', response.data.user);\n      commit('setToken', response.data.access_token);\n      router.push('/profile');\n    }).catch(err => console.error(err));\n  },\n  async CreateMessage({\n    dispatch\n  }, post) {\n    await axios.post('post', post);\n    await dispatch('GetMessages');\n  },\n  async GetMessages({\n    commit\n  }) {\n    let response = await axios.get('messages');\n    commit('setPosts', response.data);\n  },\n  async LogOut({\n    commit\n  }) {\n    commit('logOut');\n  }\n};\nconst mutations = {\n  setUser(state, username) {\n    state.user = username;\n  },\n  setToken(state, access_token) {\n    state.access_token = access_token;\n  },\n  logOut(state) {\n    state.user = null;\n    state.access_token = null;\n  }\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["axios","isProxy","toRaw","router","console","log","defaults","baseURL","api","state","user","access_token","getters","isAuthenticated","error","StateUser","actions","Register","dispatch","form","post","UserForm","FormData","append","username","password","LogIn","commit","then","response","data","push","catch","err","CreateMessage","GetMessages","get","LogOut","mutations","setUser","setToken","logOut"],"sources":["/home/kevin/Projects/Personal/big-bad-project/client/src/store/modules/auth.js"],"sourcesContent":["import axios from 'axios'\r\nimport { isProxy, toRaw } from 'vue'\r\nimport router from '@/router'\r\n\r\nconsole.log(axios.defaults.baseURL)\r\nconst api = `${axios.defaults.baseURL}api`\r\nconst state = {\r\n  user: null,\r\n  access_token: null\r\n};\r\n\r\nconst getters = {\r\n  isAuthenticated: state => { console.error('isAuthenticated state: ', isProxy(state) ? toRaw(state) : state); return !!state.user } ,\r\n  StateUser: state => state.user,\r\n};\r\n\r\nconst actions = {\r\n  async Register({dispatch}, form) {\r\n    await axios.post(`${api}/register`, form)\r\n    let UserForm = new FormData()\r\n    UserForm.append('username', form.username)\r\n    UserForm.append('password', form.password)\r\n    await dispatch('LogIn', UserForm)\r\n  },\r\n\r\n  async LogIn({ commit }, user) {\r\n    user = isProxy(user) ? toRaw(user) : user\r\n    axios.post(`${api}/login`, user).then(response => {\r\n      console.log(response.data.user)\r\n      commit('setUser', response.data.user)\r\n      commit('setToken', response.data.access_token)\r\n      router.push('/profile')\r\n    }).catch(err => console.error(err))\r\n  },\r\n\r\n  async CreateMessage({ dispatch }, post) {\r\n    await axios.post('post', post)\r\n    await dispatch('GetMessages')\r\n  },\r\n\r\n  async GetMessages({ commit }){\r\n    let response = await axios.get('messages')\r\n    commit('setPosts', response.data)\r\n  },\r\n\r\n  async LogOut({ commit }){\r\n    commit('logOut')\r\n  }\r\n};\r\n\r\nconst mutations = {\r\n  setUser(state, username){\r\n    state.user = username\r\n  },\r\n  setToken(state, access_token) {\r\n    state.access_token = access_token\r\n  },\r\n  logOut(state) {\r\n    state.user = null\r\n    state.access_token = null\r\n  }\r\n};\r\n\r\nexport default {\r\n  state,\r\n  getters,\r\n  actions,\r\n  mutations\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}